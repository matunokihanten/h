<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÂÆåÁíß„Å™3D„Çµ„Ç§„Ç≥„É≠Êï∞„Åà„Ç≤„Éº„É†</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 10px;
  color: white;
}

.game-container {
  max-width: 1000px;
  width: 100%;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

h1 {
  font-size: 2em;
  margin-bottom: 10px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

.game-info {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.info-card {
  background: rgba(255,255,255,0.2);
  padding: 8px 15px;
  border-radius: 10px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.3);
  font-size: 0.9em;
}

.dice-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin: 15px 0;
  align-items: center;
  perspective: 1000px;
}

.dice {
  width: 60px;
  height: 60px;
  position: relative;
  transform-style: preserve-3d;
  cursor: pointer;
  transition: transform 0.3s ease;
  animation: diceFloat 3s ease-in-out infinite;
}

.dice:hover {
  transform: scale(1.1);
}

@keyframes diceFloat {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-5px); }
}

.dice-face {
  position: absolute;
  width: 60px;
  height: 60px;
  background: linear-gradient(145deg, #ffffff, #f0f0f0);
  border: 2px solid #333;
  border-radius: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 0;
}

.dice-face.front { transform: rotateY(0deg) translateZ(30px); }
.dice-face.back { transform: rotateY(180deg) translateZ(30px); }
.dice-face.right { transform: rotateY(90deg) translateZ(30px); }
.dice-face.left { transform: rotateY(-90deg) translateZ(30px); }
.dice-face.top { transform: rotateX(90deg) translateZ(30px); }
.dice-face.bottom { transform: rotateX(-90deg) translateZ(30px); }

.dot {
  width: 12px;
  height: 12px;
  background: #111; /* Changed to black for better contrast on white background */
  border-radius: 50%;
  position: absolute;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}
.face-1 .dot { top: 50%; left: 50%; transform: translate(-50%, -50%); }

.face-2 .dot:nth-child(1) { top: 20%; left: 20%; }
.face-2 .dot:nth-child(2) { bottom: 20%; right: 20%; }

.face-3 .dot:nth-child(1) { top: 20%; left: 20%; }
.face-3 .dot:nth-child(2) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.face-3 .dot:nth-child(3) { bottom: 20%; right: 20%; }

.face-4 .dot:nth-child(1) { top: 20%; left: 20%; }
.face-4 .dot:nth-child(2) { top: 20%; right: 20%; }
.face-4 .dot:nth-child(3) { bottom: 20%; left: 20%; }
.face-4 .dot:nth-child(4) { bottom: 20%; right: 20%; }

.face-5 .dot:nth-child(1) { top: 20%; left: 20%; }
.face-5 .dot:nth-child(2) { top: 20%; right: 20%; }
.face-5 .dot:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.face-5 .dot:nth-child(4) { bottom: 20%; left: 20%; }
.face-5 .dot:nth-child(5) { bottom: 20%; right: 20%; }

.face-6 .dot:nth-child(1) { top: 20%; left: 20%; }
.face-6 .dot:nth-child(2) { top: 20%; right: 20%; }
.face-6 .dot:nth-child(3) { top: 50%; left: 20%; transform: translateY(-50%); }
.face-6 .dot:nth-child(4) { top: 50%; right: 20%; transform: translateY(-50%); }
.face-6 .dot:nth-child(5) { bottom: 20%; left: 20%; }
.face-6 .dot:nth-child(6) { bottom: 20%; right: 20%; }

.answer-section {
  margin: 15px 0;
}

.answer-input {
  display: flex;
  justify-content: center;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

input[type="number"] {
  padding: 10px 15px;
  font-size: 1.2em;
  border: none;
  border-radius: 10px;
  text-align: center;
  width: 90px;
  background: rgba(255,255,255,0.9);
  color: #333;
}

button {
  padding: 10px 20px;
  font-size: 1em;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  background: linear-gradient(145deg, #4CAF50, #45a049);
  color: white;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

button:active {
  transform: translateY(0);
}

.next-button {
  background: linear-gradient(145deg, #2196F3, #1976D2);
}

.result {
  margin: 10px 0;
  font-size: 1.2em;
  font-weight: bold;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  min-height: 2em; /* Ensure space is reserved */
}

.correct {
  color: #4CAF50;
  animation: bounce 0.6s ease;
}

.incorrect {
  color: #f44336;
  animation: shake 0.6s ease;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-15px); }
  60% { transform: translateY(-8px); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

.progress-bar {
  width: 90%;
  max-width: 400px;
  height: 15px;
  background: rgba(255,255,255,0.2);
  border-radius: 10px;
  margin: 10px auto;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4CAF50, #8BC34A);
  border-radius: 10px;
  transition: width 0.5s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.celebration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1000;
}

.confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  background: #f44336;
  animation: confetti-fall 3s linear forwards;
}

@keyframes confetti-fall {
  to {
    transform: translateY(100vh) rotate(360deg);
  }
}

.screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 100vh;
  gap: 15px;
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
}

#final-score {
  margin: 15px 0;
  font-size: 1.1em;
  line-height: 1.5;
}

#start-btn, #restart-btn {
  padding: 12px 30px;
  font-size: 1.3em;
}

@media (max-width: 480px) {
  h1 {
    font-size: 1.8em;
  }
  .info-card {
    font-size: 0.8em;
  }
  .dice {
    width: 50px;
    height: 50px;
  }
  .dice-face {
    width: 50px;
    height: 50px;
    border-radius: 6px;
  }
  .dice-face.front { transform: rotateY(0deg) translateZ(25px); }
  .dice-face.back { transform: rotateY(180deg) translateZ(25px); }
  .dice-face.right { transform: rotateY(90deg) translateZ(25px); }
  .dice-face.left { transform: rotateY(-90deg) translateZ(25px); }
  .dice-face.top { transform: rotateX(90deg) translateZ(25px); }
  .dice-face.bottom { transform: rotateX(-90deg) translateZ(25px); }
  .dot {
    width: 10px;
    height: 10px;
  }
  input[type="number"] {
    font-size: 1em;
    padding: 8px 10px;
    width: 80px;
  }
  button {
    font-size: 0.9em;
    padding: 8px 15px;
  }
}
</style>
</head>
<body>
<div id="start-screen" class="screen">
  <h1>üé≤ 3D„Çµ„Ç§„Ç≥„É≠Êï∞„Åà„Ç≤„Éº„É† üé≤</h1>
  <p>Âà∂ÈôêÊôÇÈñìÂÜÖ„Å´Ë°®Á§∫„Åï„Çå„Åü„Çµ„Ç§„Ç≥„É≠„ÅÆÁõÆ„ÅÆÂêàË®à„ÇíÊï∞„Åà„Çà„ÅÜÔºÅ</p>
  <button id="start-btn">„Ç≤„Éº„É†„Çπ„Çø„Éº„Éà</button>
</div>

<div id="game-container" class="game-container" style="display: none;">
  <h1>üé≤ 3D„Çµ„Ç§„Ç≥„É≠Êï∞„Åà„Ç≤„Éº„É† üé≤</h1>

  <div class="game-info">
    <div class="info-card">
      <div>„É¨„Éô„É´: <span id="level">1</span></div>
    </div>
    <div class="info-card">
      <div>„Çπ„Ç≥„Ç¢: <span id="score">0</span></div>
    </div>
    <div class="info-card">
      <div>ÈÄ£Á∂öÊ≠£Ëß£: <span id="streak">0</span></div>
    </div>
    <div class="info-card">
      <div>Âà∂ÈôêÊôÇÈñì: <span id="timer">30</span>Áßí</div>
    </div>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" id="progress-fill"></div>
  </div>

  <div class="dice-container" id="dice-container"></div>

  <div class="answer-section">
    <div class="answer-input">
      <label for="answer">ÂêàË®à„ÅÆÁõÆ„ÅØÔºü</label>
      <input type="number" id="answer" min="1" max="600" placeholder="?">
      <button id="submit-btn" onclick="checkAnswer()">Á≠î„Åà„Çã</button>
      <button class="next-button" id="next-btn" onclick="nextLevel()" style="display:none;">Ê¨°„ÅÆ„É¨„Éô„É´</button>
    </div>
  </div>

  <div class="result" id="result"></div>
</div>

<div id="end-screen" class="screen" style="display: none;">
  <h1 id="end-title">„Ç≤„Éº„É†ÁµÇ‰∫Ü</h1>
  <p id="end-message"></p>
  <div id="final-score"></div>
  <button id="restart-btn">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
</div>

<div class="celebration" id="celebration"></div>

<script>
// DOMË¶ÅÁ¥†„ÅÆÂèñÂæó
const startScreen = document.getElementById('start-screen');
const endScreen = document.getElementById('end-screen');
const gameContainer = document.getElementById('game-container');
const startBtn = document.getElementById('start-btn');
const restartBtn = document.getElementById('restart-btn');
const levelEl = document.getElementById('level');
const scoreEl = document.getElementById('score');
const streakEl = document.getElementById('streak');
const timerEl = document.getElementById('timer');
const progressFill = document.getElementById('progress-fill');
const diceContainer = document.getElementById('dice-container');
const answerInput = document.getElementById('answer');
const resultEl = document.getElementById('result');
const submitBtn = document.getElementById('submit-btn');
const nextBtn = document.getElementById('next-btn');
const endTitle = document.getElementById('end-title');
const endMessage = document.getElementById('end-message');
const finalScore = document.getElementById('final-score');
const celebration = document.getElementById('celebration');

// „Ç≤„Éº„É†Ë®≠ÂÆö
const MAX_LEVEL = 10;
const BASE_TIME = 40;
const MIN_TIME = 15;

// „Ç≤„Éº„É†Áä∂ÊÖã
let currentLevel = 1;
let score = 0;
let streak = 0;
let maxStreak = 0;
let correctAnswer = 0;
let timeLeft = 30;
let timer = null;
let gameActive = false;

// „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆË®≠ÂÆö
startBtn.addEventListener('click', startGame);
restartBtn.addEventListener('click', startGame);
submitBtn.addEventListener('click', checkAnswer);
nextBtn.addEventListener('click', nextLevel);

// „Ç®„É≥„Çø„Éº„Ç≠„Éº„ÅßÂõûÁ≠îÈÄÅ‰ø°
answerInput.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    checkAnswer();
  }
});

// „Ç≤„Éº„É†ÈñãÂßã
function startGame() {
  startScreen.style.display = 'none';
  endScreen.style.display = 'none';
  gameContainer.style.display = 'flex';

  initGame();
  generateLevel();
}

// „Ç≤„Éº„É†ÂàùÊúüÂåñ
function initGame() {
  currentLevel = 1;
  score = 0;
  streak = 0;
  maxStreak = 0;
  updateUI();
}

// „É¨„Éô„É´ÁîüÊàê
function generateLevel() {
  gameActive = true;
  answerInput.value = '';
  diceContainer.innerHTML = '';
  resultEl.textContent = '';
  resultEl.className = 'result';

  // „Çµ„Ç§„Ç≥„É≠„ÅÆÊï∞„ÇíÊ±∫ÂÆöÔºà„É¨„Éô„É´„Å´Âøú„Åò„Å¶Â¢óÂä†Ôºâ
  const baseDiceCount = 2;
  const additionalDice = Math.floor((currentLevel - 1) / 2);
  const diceCount = Math.min(baseDiceCount + currentLevel - 1 + additionalDice, 20);

  correctAnswer = 0;

  // „Çµ„Ç§„Ç≥„É≠„ÇíÁîüÊàê
  for (let i = 0; i < diceCount; i++) {
    const value = Math.floor(Math.random() * 6) + 1;
    correctAnswer += value;
    const dice = createDice(value);
    diceContainer.appendChild(dice);

    // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈÅÖÂª∂
    setTimeout(() => {
      dice.style.animationDelay = `${i * 0.1}s`;
    }, i * 100);
  }

  // Âà∂ÈôêÊôÇÈñì„ÅÆË®≠ÂÆö
  timeLeft = Math.max(MIN_TIME, BASE_TIME - currentLevel * 2);
  startTimer();
  updateUI();

  // „Éú„Çø„É≥„ÅÆË°®Á§∫Âà∂Âæ°
  submitBtn.style.display = 'inline-block';
  nextBtn.style.display = 'none';
  
  // ÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ„Å´„Éï„Ç©„Éº„Ç´„Çπ
  setTimeout(() => {
    answerInput.focus();
  }, 500);
}

// „Çø„Ç§„Éû„ÉºÈñãÂßã
function startTimer() {
  clearInterval(timer);
  timerEl.textContent = timeLeft;
  timerEl.style.color = 'white';
  timerEl.style.fontSize = '1em';

  timer = setInterval(() => {
    timeLeft--;
    timerEl.textContent = timeLeft;

    // ÊôÇÈñìË≠¶Âëä
    if (timeLeft <= 10) {
      timerEl.style.color = '#ff5722';
      timerEl.style.fontSize = '1.3em';
    }

    if (timeLeft <= 0) {
      clearInterval(timer);
      if (gameActive) {
        gameActive = false;
        showResult(false, true);
      }
    }
  }, 1000);
}

// ÂõûÁ≠î„ÉÅ„Çß„ÉÉ„ÇØ
function checkAnswer() {
  if (!gameActive || answerInput.value === '') {
    // Á©∫„ÅÆÂ†¥Âêà„ÅØË≠¶Âëä
    answerInput.style.background = 'rgba(255, 235, 238, 0.95)';
    setTimeout(() => {
      answerInput.style.background = 'rgba(255, 255, 255, 0.9)';
    }, 500);
    return;
  }

  clearInterval(timer);
  gameActive = false;

  const userAnswer = parseInt(answerInput.value, 10);
  const isCorrect = userAnswer === correctAnswer;
  showResult(isCorrect, false);
}

// ÁµêÊûúË°®Á§∫
function showResult(isCorrect, timeUp) {
  const timeout = 2000;

  if (timeUp) {
    resultEl.textContent = `‚è∞ ÊôÇÈñìÂàá„ÇåÔºÅÊ≠£Ëß£„ÅØ ${correctAnswer} „Åß„Åó„Åü`;
    resultEl.className = 'result incorrect';
    streak = 0;
    setTimeout(() => showEndScreen('timeout'), timeout);
  } else if (isCorrect) {
    const timeBonus = Math.floor(timeLeft * 2);
    const levelBonus = currentLevel * 10;
    const streakBonus = streak >= 3 ? streak * 5 : 0;
    const totalPoints = levelBonus + timeBonus + streakBonus;

    score += totalPoints;
    streak++;
    maxStreak = Math.max(maxStreak, streak);

    let bonusText = '';
    if (streakBonus > 0) bonusText = ` +ÈÄ£Á∂ö„Éú„Éº„Éä„Çπ${streakBonus}`;
    if (timeBonus > 10) bonusText += ` +ÊôÇÈñì„Éú„Éº„Éä„Çπ${timeBonus}`;

    resultEl.textContent = `üéâ Ê≠£Ëß£ÔºÅ +${totalPoints}ÁÇπ${bonusText}`;
    resultEl.className = 'result correct';
    createCelebration();

    submitBtn.style.display = 'none';

    if (currentLevel < MAX_LEVEL) {
      nextBtn.style.display = 'inline-block';
      // Ê¨°„ÅÆ„Éú„Çø„É≥„Å´„Éï„Ç©„Éº„Ç´„Çπ
      setTimeout(() => {
        nextBtn.focus();
      }, 100);
    } else {
      setTimeout(() => showEndScreen('complete'), timeout);
    }
  } else {
    resultEl.textContent = `‚ùå ‰∏çÊ≠£Ëß£‚Ä¶ Ê≠£Ëß£„ÅØ ${correctAnswer} „Åß„Åó„Åü`;
    resultEl.className = 'result incorrect';
    streak = 0;
    setTimeout(() => showEndScreen('wrong'), timeout);
  }

  updateUI();
}

// Ê¨°„ÅÆ„É¨„Éô„É´„Å∏
function nextLevel() {
  if (currentLevel < MAX_LEVEL) {
    currentLevel++;
    generateLevel();
  }
}

// ÁµÇ‰∫ÜÁîªÈù¢Ë°®Á§∫
function showEndScreen(type) {
  gameContainer.style.display = 'none';
  endScreen.style.display = 'flex';

  switch (type) {
    case 'complete':
      endTitle.textContent = 'üèÜ ÂÖ®„É¨„Éô„É´„ÇØ„É™„Ç¢ÔºÅ üèÜ';
      endMessage.textContent = '„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅÂÆåÁíß„Å™„Çµ„Ç§„Ç≥„É≠„Éû„Çπ„Çø„Éº„Åß„ÅôÔºÅ';
      break;
    case 'timeout':
      endTitle.textContent = '‚è∞ ÊôÇÈñìÂàá„Çå';
      endMessage.textContent = '„ÇÇ„ÅÜÂ∞ë„ÅóÈÄü„ÅèË®àÁÆó„Åó„Å¶„Åø„Çà„ÅÜÔºÅ';
      break;
    case 'wrong':
      endTitle.textContent = 'üí≠ ÊÉú„Åó„ÅÑÔºÅ';
      endMessage.textContent = 'Ë®àÁÆó„Çí„ÇÇ„ÅÜ‰∏ÄÂ∫¶Á¢∫Ë™ç„Åó„Å¶„Åø„Çà„ÅÜÔºÅ';
      break;
  }

  finalScore.innerHTML = `
    <div>ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: ${score}ÁÇπ</div>
    <div>Âà∞ÈÅî„É¨„Éô„É´: ${currentLevel}</div>
    <div>ÊúÄÂ§ßÈÄ£Á∂öÊ≠£Ëß£: ${maxStreak}Âõû</div>
  `;
  
  // „É™„Çπ„Çø„Éº„Éà„Éú„Çø„É≥„Å´„Éï„Ç©„Éº„Ç´„Çπ
  setTimeout(() => {
    restartBtn.focus();
  }, 100);
}

// UIÊõ¥Êñ∞
function updateUI() {
  levelEl.textContent = currentLevel;
  scoreEl.textContent = score.toLocaleString();
  streakEl.textContent = streak;

  const progress = ((currentLevel - 1) / (MAX_LEVEL - 1)) * 100;
  progressFill.style.width = `${progress}%`;
}

// 3D„Çµ„Ç§„Ç≥„É≠‰ΩúÊàê
function createDice(value) {
  const dice = document.createElement('div');
  dice.className = 'dice';
  dice.setAttribute('data-value', value);

  // „Çµ„Ç§„Ç≥„É≠„ÅÆ6„Å§„ÅÆÈù¢„Çí‰ΩúÊàê
  const faces = ['front', 'back', 'right', 'left', 'top', 'bottom'];
  const values = [
    value,
    7 - value,
    Math.ceil(Math.random() * 6),
    Math.ceil(Math.random() * 6),
    Math.ceil(Math.random() * 6),
    Math.ceil(Math.random() * 6)
  ];
  
  for (let i = 0; i < 6; i++) {
    const face = document.createElement('div');
    face.className = `dice-face ${faces[i]} face-${values[i]}`;
    
    // „Éâ„ÉÉ„Éà„ÇíËøΩÂä†
    for (let j = 0; j < values[i]; j++) {
      const dot = document.createElement('div');
      dot.className = 'dot';
      face.appendChild(dot);
    }
    
    dice.appendChild(face);
  }

  // ÂàùÊúü„ÅÆÂõûËª¢„Çí„É©„É≥„ÉÄ„É†„Å´Ë®≠ÂÆö
  const rotX = Math.floor(Math.random() * 4) * 90;
  const rotY = Math.floor(Math.random() * 4) * 90;
  dice.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;

  // „ÇØ„É™„ÉÉ„ÇØÂäπÊûú
  dice.addEventListener('click', () => {
    if (!gameActive) return;
    
    // „ÇØ„É™„ÉÉ„ÇØ„Åß„Çµ„Ç§„Ç≥„É≠„ÇíÂõûËª¢„Åï„Åõ„Çã
    const newRotX = rotX + 360;
    const newRotY = rotY + 360;
    dice.style.transition = 'transform 1s ease';
    dice.style.transform = `rotateX(${newRotX}deg) rotateY(${newRotY}deg)`;
    
    // ÂõûËª¢Âæå„Å´ÂÖÉ„ÅÆËßíÂ∫¶„Å´Êàª„ÅôÔºà„Åü„Å†„ÅóË¶ñË¶öÁöÑ„Å´„ÅØÂêå„Åò„Å´Ë¶ã„Åà„ÇãÔºâ
    setTimeout(() => {
      dice.style.transition = 'none';
      dice.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      
      // ÈÄöÂ∏∏„ÅÆ„ÇØ„É™„ÉÉ„ÇØÂäπÊûú„ÇíËøΩÂä†
      setTimeout(() => {
        dice.style.transition = 'transform 0.3s ease';
        dice.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg) scale(1.1)`;
        setTimeout(() => {
          dice.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
        }, 200);
      }, 50);
    }, 1000);
  });

  return dice;
}

// „ÅäÁ•ù„ÅÑ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function createCelebration() {
  const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a29bfe', '#fd79a8', '#00b894'];
  const particleCount = streak > 5 ? 80 : 50;

  celebration.innerHTML = ''; // Êó¢Â≠ò„ÅÆÁ¥ôÂêπÈõ™„Çí„ÇØ„É™„Ç¢

  for (let i = 0; i < particleCount; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.animationDelay = Math.random() * 1 + 's';
    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
    confetti.style.width = (8 + Math.random() * 8) + 'px';
    confetti.style.height = confetti.style.width;

    celebration.appendChild(confetti);

    setTimeout(() => {
      if (confetti.parentNode) {
        confetti.remove();
      }
    }, 3500);
  }
}

// „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„ÅÆ„Éï„Ç©„Éº„Ç´„Çπ
window.addEventListener('load', () => {
  startBtn.focus();
});
</script>
</body>
</html>
